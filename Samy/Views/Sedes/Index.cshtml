@model IEnumerable<Modelo.Modelos.Sede>

@{
    ViewBag.Title = "Index";
}

<h2>Sedes</h2>

<p>
    @Html.ActionLink("Crear", "Create")
</p>
<div>
    <table id="grid"></table>
    <div id="pager"></div>
</div>
<link href="~/Content/themes/base/jquery-ui.css" rel="stylesheet" />
<link href="~/Content/jquery.jqGrid/ui.jqgrid.css" rel="stylesheet" />
<link href="~/Content/jqGrid-Botstrap.css" rel="stylesheet" />
@section scripts {
    <script src="~/Scripts/i18n/grid.locale-es.js"></script>
    <script src="~/Scripts/jquery.jqGrid.js"></script>
    <script>
        $(function () {
            debugger;
            $("#grid").jqGrid({
                url: "/Sedes/ListarSedes",
                datatype: "json",
                mtype: "Get",
                colNames: ["Id", "Nombre","Acción"],
                colModel: [
                    { key: true, hidden: true, name: "Id", index: "Id" },
                    { key: false, name: "Nombre", index: "Nombre", editable: false },
                      { name: 'act', index: 'act', width: 75, sortable: false }
                ],
                pager: $("#pager"),
                rowNum: 10,
                rowList: [10, 15],
                height: "100%",
                viewrecords: true,
                caption: "Sedes",
                emptyrecords: "No hay sedes",
                gridComplete: function () {
                    var ids = jQuery("#grid").getDataIDs();
                    for (var i = 0; i < ids.length; i++) {
                        var cl = ids[i];
                        debugger;
                        be = "<a class='btn btn-warning  btn-sm' href='/Sedes/Edit/" + cl + "'>Editar</a> |";
                        se = "<a class='btn btn-info  btn-sm' href='/Sedes/Details/" + cl + "'>Detalles</a> |";
                        ce = "<a class='btn btn-danger  btn-sm' href='/Sedes/Delete/" + cl + "'>Eliminar</a>";
                        jQuery("#grid").setRowData(ids[i], { act: be + se + ce })
                    }

                },
                jsonReader: {
                    root: "rows",
                    page: "page",
                    total: "total",
                    records: "records",
                    repeatitems: false,
                    id: "0"
                },
                autowidth: true,
                multiselect: false
            });
        });
    </script>
}
